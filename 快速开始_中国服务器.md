# 🚀 快速开始 - 中国服务器版

## 三分钟部署指南

### 第一步：下载项目

```bash
# 使用Git（如果可用）
git clone <你的仓库地址>
cd <项目目录>

# 或者直接下载ZIP并解压
```

### 第二步：一键安装

```bash
chmod +x install_china.sh
./install_china.sh
```

安装脚本会自动：
- ✅ 检查Python环境
- ✅ 安装依赖（使用阿里云镜像）
- ✅ 安装Playwright浏览器
- ✅ 初始化数据库
- ✅ 创建systemd服务文件

### 第三步：启动服务

**开发模式（快速测试）：**
```bash
python3 app.py
```

**生产模式（推荐）：**
```bash
./start_production.sh
```

**系统服务（开机自启）：**
```bash
sudo mv /tmp/webmonitor.service /etc/systemd/system/
sudo systemctl start webmonitor
sudo systemctl enable webmonitor
```

### 第四步：访问界面

在浏览器中打开：
```
http://服务器IP:9527
```

### 第五步：配置Telegram（重要！）

1. 点击"✈️ Telegram配置"标签页
2. 填写配置信息：

   ```
   Bot Token: 你的机器人Token
   Chat ID: 你的Chat ID
   代理地址: http://127.0.0.1:7890  ← 中国服务器必填！
   ```

3. 点击"测试连接"验证配置
4. 点击"保存配置"

### 第六步：添加监控

1. 点击"📋 监控列表"标签页
2. 点击"➕ 添加监控网址"
3. 填写信息：
   - 网址名称：例如"新闻网站"
   - 网址URL：https://example.com
   - 检查间隔：300秒（推荐）

4. 点击"🔑 关键词管理"标签页
5. 添加要监控的关键词

6. 返回首页，点击"▶ 启动监控"

### 完成！🎉

现在系统已经开始监控了，当检测到关键词时会自动发送Telegram通知。

---

## 📡 代理配置说明

### 为什么需要代理？

在中国服务器上，Telegram API（api.telegram.org）被墙，必须通过代理访问。

### 常用代理软件

**1. V2Ray/Xray**
```bash
# 默认端口
HTTP:    http://127.0.0.1:10809
SOCKS5:  socks5://127.0.0.1:1080
```

**2. Clash**
```bash
# 默认端口
HTTP:    http://127.0.0.1:7890
SOCKS5:  socks5://127.0.0.1:7891
```

**3. Shadowsocks**
```bash
# 默认端口
SOCKS5:  socks5://127.0.0.1:1080
```

### 测试代理是否可用

```bash
# 测试HTTP代理
curl -x http://127.0.0.1:7890 https://api.telegram.org

# 测试SOCKS5代理
curl --socks5 127.0.0.1:1080 https://api.telegram.org

# 如果返回JSON数据，说明代理可用
```

---

## 🔍 监控状态说明

### 状态指示器

- 🟢 **运行中** - 监控正常工作
- 🔴 **已停止** - 监控未启动

### 监控按钮

- **▶ 启动监控** - 开始定时监控
- **⏹ 停止监控** - 停止监控任务
- **⚡ 立即执行** - 不等定时，立即执行一次

---

## 📊 日志管理

### 自动清理

系统已配置自动清理：
- 每次监控执行后自动清理
- 保留最新5条日志
- 无需手动干预

### 手动清理

如需立即清理：
1. 进入"📊 监控日志"标签页
2. 点击"🗑️ 清理旧日志"按钮

---

## 🛠️ 常见问题

### Q1: 安装失败怎么办？

```bash
# 手动安装依赖
pip3 install -r requirements_china.txt -i https://mirrors.aliyun.com/pypi/simple/
```

### Q2: 端口被占用？

修改 `app.py` 文件中的端口：
```python
app.run(host='0.0.0.0', port=你的端口, debug=False)
```

### Q3: Telegram发送失败？

1. 检查代理是否正确配置
2. 确保代理服务正常运行
3. 查看日志：`tail -f monitor.log`

### Q4: 忘记后台运行了？

使用screen或tmux：
```bash
# screen
screen -S webmonitor
python3 app.py
# 按 Ctrl+A 再按 D 退出

# 恢复
screen -r webmonitor
```

---

## 📝 后续操作

### 查看日志

```bash
# 应用日志
tail -f monitor.log

# 系统服务日志
sudo journalctl -u webmonitor -f
```

### 停止服务

```bash
# 开发模式：按 Ctrl+C

# 生产模式
kill $(cat /tmp/webmonitor.pid)

# 系统服务
sudo systemctl stop webmonitor
```

### 备份数据

```bash
cp monitor.db monitor.db.backup
```

---

## 📚 更多文档

- **详细部署指南**：[deploy_china.md](deploy_china.md)
- **完整功能说明**：[README_CHINA.md](README_CHINA.md)
- **更新日志**：[CHANGELOG.md](CHANGELOG.md)
- **优化总结**：[部署总结.md](部署总结.md)

---

## 💡 最佳实践

1. ✅ 使用 systemd 管理服务（推荐）
2. ✅ 配置合理的检查间隔（≥300秒）
3. ✅ 定期备份数据库
4. ✅ 监控系统资源使用
5. ✅ 设置防火墙规则

---

## 🎉 恭喜！

你已经成功在中国服务器上部署了网页监控系统！

如有问题，请查看详细文档或提交Issue。

**祝您使用愉快！** 🚀
