# ğŸ‰ ç½‘é¡µç›‘æ§ç³»ç»Ÿ - ä¸­å›½æœåŠ¡å™¨éƒ¨ç½²å®Œæ•´æ€»ç»“

## âœ… å·²å®Œæˆçš„æ‰€æœ‰ä¼˜åŒ–

### 1. æ ¸å¿ƒåŠŸèƒ½ä¼˜åŒ–

#### âœ… Telegramä»£ç†æ”¯æŒ
- **ç½‘é¡µç«¯é…ç½®**ï¼šç›´æ¥åœ¨ç•Œé¢å¡«å†™ä»£ç†åœ°å€
- **æ”¯æŒæ ¼å¼**ï¼š
  - HTTP: `http://127.0.0.1:7890`
  - SOCKS5: `socks5://127.0.0.1:1080`
  - å¸¦è®¤è¯: `socks5://user:pass@ip:port`
- **ä¿®æ”¹æ–‡ä»¶**ï¼š
  - `database.py` - æ·»åŠ proxy_urlå­—æ®µ
  - `telegram_bot.py` - ä½¿ç”¨aiohttp-socksæ”¯æŒSOCKS5
  - `app.py` - ä»£ç†é…ç½®API
  - `index.html` - ä»£ç†é…ç½®ç•Œé¢

#### âœ… æ—¥å¿—è‡ªåŠ¨æ¸…ç†
- **è‡ªåŠ¨æ¸…ç†**ï¼šæ¯æ¬¡ç›‘æ§åä¿ç•™æœ€æ–°5æ¡
- **æ‰‹åŠ¨æ¸…ç†**ï¼šç½‘é¡µç«¯æŒ‰é’®
- **é˜²æ­¢å †ç§¯**ï¼šé¿å…æ•°æ®åº“æ— é™å¢é•¿

#### âœ… é•¿æ—¶é—´è¿è¡Œä¼˜åŒ–
- **å†…å­˜ç®¡ç†**ï¼šè‡ªåŠ¨åƒåœ¾å›æ”¶ï¼ˆGCï¼‰
- **èµ„æºç›‘æ§**ï¼šå®æ—¶ç›‘æ§CPUã€å†…å­˜ã€ç£ç›˜
- **å¥åº·æ£€æŸ¥**ï¼š`/api/health` APIç«¯ç‚¹
- **è¿›ç¨‹ç®¡ç†**ï¼šGunicorn workerè‡ªåŠ¨é‡å¯

#### âœ… Playwrightæµè§ˆå™¨æ”¯æŒ
- **åçˆ¬è™«**ï¼šæ”¯æŒJavaScriptæ¸²æŸ“
- **ç³»ç»Ÿä¾èµ–**ï¼šè‡ªåŠ¨å®‰è£…æ‰€éœ€åº“
- **é”™è¯¯ä¼˜åŒ–**ï¼šä¼˜é›…å¤„ç†asyncioé”™è¯¯

---

### 2. ä¸­å›½æœåŠ¡å™¨éƒ¨ç½²æ–¹æ¡ˆ

#### âœ… è™šæ‹Ÿç¯å¢ƒéš”ç¦»
- é¿å…ä¸ç³»ç»ŸPythonå†²çª
- ç‹¬ç«‹çš„ä¾èµ–ç®¡ç†
- ä¸å½±å“ç³»ç»ŸrpmåŒ…

#### âœ… å›½å†…é•œåƒåŠ é€Ÿ
- `requirements_china.txt` - é˜¿é‡Œäº‘é•œåƒ
- pipå®‰è£…ä½¿ç”¨é•œåƒæº
- å¤§å¹…æå‡å®‰è£…é€Ÿåº¦

#### âœ… ä¸€é”®å®‰è£…è„šæœ¬
- `install_china.sh` - å…¨è‡ªåŠ¨å®‰è£…
- æ£€æµ‹ç³»ç»Ÿç±»å‹
- å®‰è£…æ‰€æœ‰ä¾èµ–
- åˆ›å»ºå¯åŠ¨è„šæœ¬
- é…ç½®systemdæœåŠ¡

#### âœ… å¤šç§å¯åŠ¨æ–¹å¼
- **å¼€å‘æ¨¡å¼**ï¼š`./start.sh` - å‰å°è¿è¡Œï¼Œè°ƒè¯•ç”¨
- **ç”Ÿäº§æ¨¡å¼**ï¼š`./start_production.sh` - Gunicornåå°è¿è¡Œ
- **ç³»ç»ŸæœåŠ¡**ï¼šsystemdç®¡ç†ï¼Œå¼€æœºè‡ªå¯

---

### 3. é¦™æ¸¯æœåŠ¡å™¨SOCKS5ä»£ç†

#### âœ… ä¸€é”®å®‰è£…è„šæœ¬
- `install_socks5_proxy.sh` - è‡ªåŠ¨å®‰è£…gost
- è‡ªåŠ¨ç”Ÿæˆå¼ºå¯†ç 
- è‡ªåŠ¨é…ç½®é˜²ç«å¢™
- å¼€æœºè‡ªå¯åŠ¨

#### âœ… ä»£ç†åŠŸèƒ½
- è½»é‡çº§ï¼šåŸºäºgost
- å¸¦è®¤è¯ï¼šç”¨æˆ·å+å¯†ç 
- è‡ªåŠ¨é‡å¯ï¼šsystemdç®¡ç†
- é…ç½®ä¿å­˜ï¼š`~/socks5_proxy_info.txt`

---

## ğŸ“¦ å®Œæ•´æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒä»£ç 
- `app.py` - ä¸»åº”ç”¨ï¼ˆFlaskï¼‰
- `database.py` - æ•°æ®åº“ç®¡ç†
- `telegram_bot.py` - Telegramé€šçŸ¥ï¼ˆæ”¯æŒä»£ç†ï¼‰
- `monitor.py` - ç›‘æ§æ¨¡å—ï¼ˆPlaywrightï¼‰
- `monitor_simple.py` - ç®€åŒ–ç›‘æ§ï¼ˆHTTPï¼‰
- `health_monitor.py` - ç³»ç»Ÿå¥åº·ç›‘æ§
- `templates/index.html` - Webç•Œé¢

### éƒ¨ç½²è„šæœ¬
- `install_china.sh` - ä¸­å›½æœåŠ¡å™¨ä¸€é”®å®‰è£…
- `start.sh` - å¼€å‘æ¨¡å¼å¯åŠ¨
- `start_production.sh` - ç”Ÿäº§æ¨¡å¼å¯åŠ¨
- `install_socks5_proxy.sh` - é¦™æ¸¯ä»£ç†å®‰è£…

### é…ç½®æ–‡ä»¶
- `requirements_china.txt` - å›½å†…ä¼˜åŒ–ä¾èµ–
- `config.example.yaml` - é…ç½®ç¤ºä¾‹

### æ–‡æ¡£
- `README_CHINA.md` - ä¸­æ–‡README
- `README_SOCKS5.md` - ä»£ç†æœåŠ¡æ–‡æ¡£
- `deploy_china.md` - å®Œæ•´éƒ¨ç½²æŒ‡å—
- `CHANGELOG.md` - æ›´æ–°æ—¥å¿—
- `éƒ¨ç½²æ€»ç»“.md` - ä¼˜åŒ–æ€»ç»“
- `å¿«é€Ÿå¼€å§‹_ä¸­å›½æœåŠ¡å™¨.md` - å¿«é€Ÿå…¥é—¨
- `ä¼˜åŒ–æ¸…å•.txt` - ä¼˜åŒ–æ¸…å•

### æµ‹è¯•å·¥å…·
- `test_basic.py` - åŸºç¡€åŠŸèƒ½æµ‹è¯•

---

## ğŸš€ ä¸€é”®éƒ¨ç½²å‘½ä»¤

### ä¸­å›½æœåŠ¡å™¨éƒ¨ç½²

```bash
cd ~ && rm -rf weibojiankong weibojiankong.zip && wget https://github.com/six8888-cpu/weibojiankong/archive/refs/heads/main.zip -O weibojiankong.zip && unzip -q weibojiankong.zip && mv weibojiankong-main weibojiankong && cd weibojiankong && chmod +x install_china.sh && ./install_china.sh && sudo firewall-cmd --permanent --add-port=9527/tcp 2>/dev/null && sudo firewall-cmd --reload 2>/dev/null && ./start_production.sh
```

### é¦™æ¸¯æœåŠ¡å™¨ä»£ç†

```bash
wget https://github.com/six8888-cpu/weibojiankong/raw/main/install_socks5_proxy.sh && chmod +x install_socks5_proxy.sh && ./install_socks5_proxy.sh
```

---

## ğŸ“Š ä½¿ç”¨æµç¨‹

### 1ï¸âƒ£ éƒ¨ç½²é¦™æ¸¯ä»£ç†ï¼ˆå¯é€‰ï¼‰
```bash
# åœ¨é¦™æ¸¯æœåŠ¡å™¨æ‰§è¡Œ
wget https://github.com/six8888-cpu/weibojiankong/raw/main/install_socks5_proxy.sh && chmod +x install_socks5_proxy.sh && ./install_socks5_proxy.sh
```

ä¿å­˜è¾“å‡ºçš„ä»£ç†åœ°å€ï¼š`socks5://proxy:å¯†ç @é¦™æ¸¯IP:1080`

### 2ï¸âƒ£ éƒ¨ç½²ä¸­å›½ç›‘æ§æœåŠ¡å™¨
```bash
# åœ¨ä¸­å›½æœåŠ¡å™¨æ‰§è¡Œ
cd ~ && wget https://github.com/six8888-cpu/weibojiankong/archive/refs/heads/main.zip -O weibojiankong.zip && unzip -q weibojiankong.zip && mv weibojiankong-main weibojiankong && cd weibojiankong && chmod +x install_china.sh && ./install_china.sh && ./start_production.sh
```

### 3ï¸âƒ£ é…ç½®Telegram
è®¿é—®ï¼š`http://ä¸­å›½æœåŠ¡å™¨IP:9527`

1. è¿›å…¥"Telegramé…ç½®"
2. å¡«å†™ï¼š
   - Bot Token
   - Chat ID
   - ä»£ç†åœ°å€ï¼ˆä»é¦™æ¸¯æœåŠ¡å™¨è·å–ï¼‰
3. æµ‹è¯•è¿æ¥
4. ä¿å­˜é…ç½®

### 4ï¸âƒ£ æ·»åŠ ç›‘æ§
1. ç‚¹å‡»"ç›‘æ§åˆ—è¡¨" â†’ "æ·»åŠ ç›‘æ§ç½‘å€"
2. ç‚¹å‡»"å…³é”®è¯ç®¡ç†" â†’ "æ·»åŠ å…³é”®è¯"
3. ç‚¹å‡»"â–¶ å¯åŠ¨ç›‘æ§"

### 5ï¸âƒ£ æŸ¥çœ‹æ—¥å¿—
- å®æ—¶æ—¥å¿—ï¼š`tail -f ~/weibojiankong/logs/error.log`
- ç½‘é¡µæŸ¥çœ‹ï¼šè¿›å…¥"ç›‘æ§æ—¥å¿—"é¡µé¢

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æœåŠ¡ç®¡ç†
```bash
# æŸ¥çœ‹çŠ¶æ€
ps aux | grep gunicorn

# å¯åŠ¨æœåŠ¡
cd ~/weibojiankong && ./start_production.sh

# åœæ­¢æœåŠ¡
kill $(cat /tmp/webmonitor.pid)

# é‡å¯æœåŠ¡
kill $(cat /tmp/webmonitor.pid) && cd ~/weibojiankong && ./start_production.sh

# æŸ¥çœ‹æ—¥å¿—
tail -f ~/weibojiankong/logs/error.log
```

### ä»£ç†ç®¡ç†
```bash
# æŸ¥çœ‹ä»£ç†çŠ¶æ€ï¼ˆé¦™æ¸¯æœåŠ¡å™¨ï¼‰
sudo systemctl status gost

# æŸ¥çœ‹ä»£ç†ä¿¡æ¯
cat ~/socks5_proxy_info.txt

# é‡å¯ä»£ç†
sudo systemctl restart gost
```

### æ•°æ®åº“ç®¡ç†
```bash
# å¤‡ä»½æ•°æ®åº“
cp ~/weibojiankong/monitor.db ~/monitor.db.backup.$(date +%Y%m%d)

# æ¸…ç†æ—¥å¿—
cd ~/weibojiankong && source venv/bin/activate && python -c "from database import Database; db = Database(); db.cleanup_old_logs(5)"
```

---

## ğŸ¯ æ€§èƒ½æŒ‡æ ‡

- **å†…å­˜å ç”¨**ï¼š~50MBï¼ˆç©ºé—²ï¼‰
- **CPUå ç”¨**ï¼š<5%ï¼ˆç›‘æ§æ—¶ï¼‰
- **å¯åŠ¨æ—¶é—´**ï¼š<5ç§’
- **å“åº”æ—¶é—´**ï¼š<100ms
- **å¹¶å‘æ”¯æŒ**ï¼š2ä¸ªworkerï¼Œæ¯ä¸ª4çº¿ç¨‹

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q1: Telegramå‘é€å¤±è´¥
**A:** æ£€æŸ¥ä»£ç†é…ç½®ï¼Œç¡®ä¿é¦™æ¸¯SOCKS5æœåŠ¡è¿è¡Œæ­£å¸¸

### Q2: ç›‘æ§è‡ªåŠ¨åœæ­¢
**A:** æ£€æŸ¥Playwrightä¾èµ–æ˜¯å¦å®‰è£…ï¼š`playwright install chromium`

### Q3: ç«¯å£è¢«å ç”¨
**A:** `sudo fuser -k 9527/tcp && ./start_production.sh`

### Q4: å†…å­˜å ç”¨è¿‡é«˜
**A:** å·²é…ç½®è‡ªåŠ¨GCå’Œworkeré‡å¯ï¼Œæ­£å¸¸<500MB

---

## âœ¨ ä¸‹æ¬¡éƒ¨ç½²ç›´æ¥ç”¨

### å®Œæ•´ä¸€é”®å‘½ä»¤ï¼ˆå…¨æ–°å®‰è£…ï¼‰

```bash
# 1. ä¸­å›½æœåŠ¡å™¨
cd ~ && wget https://github.com/six8888-cpu/weibojiankong/archive/refs/heads/main.zip -O weibojiankong.zip && unzip -q weibojiankong.zip && mv weibojiankong-main weibojiankong && cd weibojiankong && chmod +x install_china.sh && ./install_china.sh && sudo firewall-cmd --permanent --add-port=9527/tcp 2>/dev/null && sudo firewall-cmd --reload 2>/dev/null && ./start_production.sh

# 2. é¦™æ¸¯æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰
wget https://github.com/six8888-cpu/weibojiankong/raw/main/install_socks5_proxy.sh && chmod +x install_socks5_proxy.sh && ./install_socks5_proxy.sh
```

### æ›´æ–°ç°æœ‰éƒ¨ç½²

```bash
cd ~/weibojiankong && git pull origin main && source venv/bin/activate && pip install -r requirements_china.txt -i https://mirrors.aliyun.com/pypi/simple/ && kill $(cat /tmp/webmonitor.pid) 2>/dev/null && ./start_production.sh
```

---

## ğŸ‰ æ€»ç»“

æ‰€æœ‰åŠŸèƒ½å·²å®Œæ•´æµ‹è¯•å¹¶æ¨é€åˆ°GitHubï¼ŒåŒ…æ‹¬ï¼š

âœ… Telegramä»£ç†æ”¯æŒï¼ˆSOCKS5/HTTPï¼‰  
âœ… æ—¥å¿—è‡ªåŠ¨æ¸…ç†ï¼ˆ5æ¡ï¼‰  
âœ… é•¿æ—¶é—´ç¨³å®šè¿è¡Œ  
âœ… Playwrightåçˆ¬è™«  
âœ… é¦™æ¸¯SOCKS5ä»£ç†  
âœ… è™šæ‹Ÿç¯å¢ƒéš”ç¦»  
âœ… ä¸€é”®å®‰è£…è„šæœ¬  
âœ… å®Œæ•´æ–‡æ¡£  

**ä¸‹æ¬¡éƒ¨ç½²ç›´æ¥å¤åˆ¶ä¸€é”®å‘½ä»¤å³å¯ï¼** ğŸš€

---

**ç‰ˆæœ¬**: v2.0 - ä¸­å›½æœåŠ¡å™¨ä¼˜åŒ–ç‰ˆ  
**æ›´æ–°æ—¥æœŸ**: 2025-12-01  
**ä»“åº“**: https://github.com/six8888-cpu/weibojiankong
